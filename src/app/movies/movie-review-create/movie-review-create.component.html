<div class="row create-review">
  <form
    [formGroup]="reviewForm"
    (ngSubmit)="!reviewForm.invalid && createReview(reviewForm.value)"
  >
    <h3 class="flex-grow-1 text-center" i18n="create_review">Crear Reseña</h3>
    <!--Creator-->
    <div class="form-group">
      <label for="creator" i18n>Nombre</label>
      <input
        novalidate
        id="creator"
        type="text"
        class="form-control"
        formControlName="creator"
        i18n-placeholder
        placeholder="Ingrese su nombre"
        [ngClass]="{
          'is-invalid':
            reviewForm.get('creator')!.touched &&
            reviewForm.get('creator')!.errors
        }"
        i18n-placeholder
      />
      <div
        class="invalid-feedback"
        *ngIf="
          reviewForm.get('creator')!.hasError('required') &&
          reviewForm.get('creator')!.touched
        "
        i18n
      >
        El nombre es obligatorio
      </div>
      <div
        class="invalid-feedback"
        *ngIf="reviewForm.get('creator')!.hasError('minlength')"
        i18n
      >
        El nombre debe tener al menos
        {{ reviewForm.get("creator")!.errors!.minlength.requiredLength }}
        caracteres
      </div>
      <div
        class="invalid-feedback"
        *ngIf="reviewForm.get('creator')!.hasError('maxlength')"
        i18n
      >
        El nombre puede tener un máximo de
        {{ reviewForm.get("creator")!.errors!.maxlength.requiredLength }}
        caracteres
      </div>
    </div>
    <!--Text-->
    <div class="form-group">
      <label for="text" i18n>Reseña</label>
      <textarea
        novalidate
        id="text"
        class="form-control"
        formControlName="text"
        i18n-placeholder
        placeholder="Ingrese la reseña de la película"
        [ngClass]="{
          'is-invalid':
            reviewForm.get('text')!.touched && reviewForm.get('text')!.errors
        }"
        i18n-placeholder
      ></textarea>
      <div
        class="invalid-feedback"
        *ngIf="
          reviewForm.get('text')!.hasError('required') &&
          reviewForm.get('text')!.touched
        "
        i18n
      >
        La reseña es obligatoria
      </div>
      <div
        class="invalid-feedback"
        *ngIf="reviewForm.get('text')!.hasError('minlength')"
        i18n
      >
        La reseña debe tener al menos
        {{ reviewForm.get("text")!.errors!.minlength.requiredLength }}
        caracteres
      </div>
      <div
        class="invalid-feedback"
        *ngIf="reviewForm.get('text')!.hasError('maxlength')"
        i18n
      >
        La reseña puede tener un máximo de
        {{ reviewForm.get("text")!.errors!.maxlength.requiredLength }}
        caracteres
      </div>
    </div>
    <!-- Score -->
    <div class="form-group">
      <label class="me-3" for="score" i18n>Calificación</label>

      <div class="form-check form-check-inline" *ngFor="let item of scores">
        <input
          class="form-check-input"
          type="radio"
          formControlName="score"
          id="score-{{ item }}"
          [value]="item"
        />
        <label class="form-check-label" for="score-{{ item }}">{{
          item
        }}</label>
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button
        class="btn btn-outline-secondary"
        type="button"
        (click)="cancelCreateReview()"
        i18n
      >
        Cancelar
      </button>
      <button
        class="btn btn-outline-primary"
        type="submit"
        [disabled]="!reviewForm.valid"
        i18n
      >
        Guardar
      </button>
    </div>
  </form>
</div>
